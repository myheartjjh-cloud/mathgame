<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•˜ëŠ˜ë°”ë‹¤ ìˆ«ìë†€ì´</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&family=Nanum+Square+Round:wght@400;700&display=swap');

    :root {
        --cloud-pink: #E0F7FA;
        --main-pink: #81D4FA;
        --deep-pink: #0288D1;
        --sky-blue: #E1F5FE;
        --white: #FFFFFF;
    }

    body {
        font-family: 'NanumSquareRound', sans-serif;
        background: linear-gradient(135deg, #B2EBF2 0%, #E1F5FE 100%);
        display: flex;
        justify-content: center;
        align-items: center;
        /* ë†’ì´ë¥¼ 100vhê°€ ì•„ë‹ˆë¼ 100%ë¡œ ì„¤ì •í•˜ì—¬ ì˜ë¦¼ ë°©ì§€ */
        height: 100vh;
        margin: 0;
        overflow: hidden;
    }

    #phone-container {
        background: var(--white);
        /* ê³ ì • í¬ê¸°ë¥¼ ì—†ì• ê³  í™”ë©´ì— ë§ì¶¤ */
        width: 100%;
        max-width: 500px; /* íƒœë¸”ë¦¿ ëŒ€ë¹„ */
        height: 100%;
        position: relative;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        box-shadow: none; /* ì „ì²´í™”ë©´ì¼ ë• ê·¸ë¦¼ì ì œê±°ê°€ ê¹”ë”í•¨ */
        border: none; /* í…Œë‘ë¦¬ ì œê±° */
    }

    .view {
        display: none;
        flex: 1;
        padding: 20px;
        text-align: center;
        flex-direction: column;
        align-items: center;
        background: radial-gradient(circle at top left, #F0FBFF 0%, #FFFFFF 100%);
        /* ë‚´ìš©ì´ ê¸¸ì–´ì§ˆ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ìŠ¤í¬ë¡¤ í—ˆìš© */
        overflow-y: auto;
    }

    .view.active { display: flex; }

    /* ê¸€ì í¬ê¸°ë¥¼ í™”ë©´ ë„ˆë¹„ì— ë§ê²Œ ì¡°ì ˆ (ë°˜ì‘í˜•) */
    h2 { 
        color: var(--deep-pink); 
        margin-top: 10px; 
        font-family: 'Nanum Pen Script', cursive; 
        font-size: 8vw; /* í™”ë©´ ë„ˆë¹„ì— ë¹„ë¡€ */
        max-size: 2.5rem;
    }

    .q-text { 
        font-size: 15vw; /* í™”ë©´ ë„ˆë¹„ì— ë¹„ë¡€ */
        font-weight: bold; 
        color: #37474F; 
        margin: 20px 0; 
    }

    .ans-input { 
        width: 70%; 
        font-size: 2rem; 
        padding: 10px;
    }

    /* ê³„ì‚°ê¸° ë²„íŠ¼ í¬ê¸° ìµœì í™” */
    .calc-grid { 
        display: grid; 
        grid-template-columns: repeat(4, 1fr); 
        gap: 8px; 
        width: 100%;
        padding-bottom: 20px;
    }
    
    .calc-btn {
        aspect-ratio: 1 / 1; /* ë²„íŠ¼ì„ ì •ì‚¬ê°í˜•ìœ¼ë¡œ ìœ ì§€ */
        font-size: 1.5rem;
    }

    /* í•˜ë‹¨ íƒ­ ë°”ê°€ í™”ë©´ ë§¨ ì•„ë˜ì— ë¶™ë„ë¡ ì„¤ì • */
    .tab-bar { 
        min-height: 70px; 
        background: #fff; 
        display: flex; 
        border-top: 2px solid #E1F5FE; 
        padding-bottom: env(safe-area-inset-bottom); /* ìµœì‹ í° í•˜ë‹¨ë°” ëŒ€ì‘ */
    }
</style>
</head>
<body>

<div id="phone-container">
    <div id="feedback-pop">ğŸ«§</div>

    <div id="view-home" class="view active">
        <h2>ğŸ³ ì†Œí˜„ì´ ìˆ«ìë†€ì´ ğŸ¬</h2>
        <div id="op-list" style="width:100%; margin-top: 5px;">
            <button class="card" onclick="showLevels('+')"><h3>ğŸŒŠ ë³´ê¸€ë³´ê¸€ ë§ì…ˆ (+)</h3><p>ë¬¼ë°©ìš¸ì´ ëª¨ì—¬ ì»¤ì ¸ìš”</p></button>
            <button class="card" style="border-color:#C8E6C9" onclick="showLevels('-')"><h3>ğŸš ìŠìŠ ëº„ì…ˆ (-)</h3><p>ì¡°ê°œê°€ í•˜ë‚˜ì”© ì‚¬ë¼ì ¸ìš”</p></button>
            <button class="card" style="border-color:#FFE0B2" onclick="showLevels('*')"><h3>ğŸ¦€ ì‘¥ì‘¥ ê³±ì…ˆ (Ã—)</h3><p>ê²Œë“¤ì´ ì˜†ìœ¼ë¡œ ì¤„ì„ ì„œìš”</p></button>
            <button class="card" style="border-color:#D1C4E9" onclick="showLevels('/')"><h3>ğŸ³ í†¡í†¡ ë‚˜ëˆ—ì…ˆ (Ã·)</h3><p>ê³ ë˜ê°€ ë¬¼ì¤„ê¸°ë¥¼ ë‚˜ëˆ ìš”</p></button>
        </div>
        
        <div id="level-list" style="display:none; width:100%">
            <h3 style="color:var(--deep-pink); margin-bottom: 15px;">ì–´ë–¤ ë°”ë‹¤ë¡œ ê°ˆê¹Œìš”?</h3>
            <button class="card" onclick="startGame(1)"><h3>ğŸ«§ ì–•ì€ ë°”ë‹¤</h3><p id="desc1"></p></button>
            <button class="card" onclick="startGame(2)"><h3>ğŸŒŠ íŒŒë„ ë°”ë‹¤</h3><p id="desc2"></p></button>
            <button class="card" onclick="startGame(3)"><h3>ğŸ”± ê¹Šì€ ë°”ë‹¤</h3><p id="desc3"></p></button>
            <button onclick="backToOp()" style="border:none; background:none; color:#4FC3F7; text-decoration:underline; margin-top:10px; cursor:pointer;">ë’¤ë¡œê°€ê¸°</button>
        </div>
    </div>

    <div id="view-game" class="view">
        <div class="progress-bar-bg"><div id="progress-fill"></div></div>
        <div style="font-weight:bold; color:#4FC3F7; font-size: 1rem;"><span id="cur-count">1</span> / 10 ë¬¸ì œ</div>
        <div class="q-text" id="q-display">0 + 0</div>
        <input type="number" id="ans-input" class="ans-input" inputmode="numeric" onkeyup="handleInput()">
        <div id="wrong-msg">í~ã…  ë‹¤ì‹œ í•œë²ˆ í•´ë³¼ê¹Œ? ğŸ¤¿</div>
    </div>

    <div id="view-result" class="view">
        <h2 style="font-size: 2.2rem;" id="result-title">ì§€í˜œì˜ ë³´ì„ íšë“!</h2>
        <div id="reward-icon" style="font-size: 5.5rem; margin: 15px;">ğŸ’</div>
        <div style="background: #E1F5FE; padding: 15px; border-radius: 20px; width: 90%; margin-bottom: 15px;">
            <p id="praise-msg" style="font-weight:bold; color:#01579B; font-size: 1.1rem; margin: 0;"></p>
            <p style="color:#0288D1; margin-top: 5px; font-size: 0.9rem;">
                ìˆ«ì ì‹¤ë ¥ì´ <span id="score-text" style="font-weight:bold; font-size: 1.3rem;">0</span>ì¹¸ ë” ë˜‘ë˜‘í•´ì¡Œì–´ìš”!
            </p>
        </div>
        <button class="card" onclick="switchView('home')" style="background:var(--main-pink); border:none; color:white;"><h3>í•œ ë²ˆ ë” íƒí—˜í•˜ê¸°</h3></button>
    </div>

    <div id="view-calc" class="view">
        <h2 style="font-size: 2rem;">â˜ï¸ êµ¬ë¦„ ê³„ì‚°ê¸° â˜ï¸</h2>
        <div id="calc-display">0</div>
        <div class="calc-grid">
            <button class="calc-btn" onclick="cIn('7')">7</button>
            <button class="calc-btn" onclick="cIn('8')">8</button>
            <button class="calc-btn" onclick="cIn('9')">9</button>
            <button class="calc-btn op" onclick="cIn('/')">Ã·</button>
            <button class="calc-btn" onclick="cIn('4')">4</button>
            <button class="calc-btn" onclick="cIn('5')">5</button>
            <button class="calc-btn" onclick="cIn('6')">6</button>
            <button class="calc-btn op" onclick="cIn('*')">Ã—</button>
            <button class="calc-btn" onclick="cIn('1')">1</button>
            <button class="calc-btn" onclick="cIn('2')">2</button>
            <button class="calc-btn" onclick="cIn('3')">3</button>
            <button class="calc-btn op" onclick="cIn('-')">-</button>
            <button class="calc-btn" onclick="cClear()">C</button>
            <button class="calc-btn" onclick="cIn('0')">0</button>
            <button class="calc-btn op" onclick="cSolve()">=</button>
            <button class="calc-btn op" onclick="cIn('+')">+</button>
        </div>
    </div>

    <div class="tab-bar">
        <div class="tab-item active" id="tab-home" onclick="switchTab('home')">
            <span class="tab-icon">ğŸï¸</span><span>ê³µë¶€ë°©</span>
        </div>
        <div class="tab-item" id="tab-calc" onclick="switchTab('calc')">
            <span class="tab-icon">â˜ï¸</span><span>êµ¬ë¦„ê³„ì‚°ê¸°</span>
        </div>
    </div>
</div>

<script>
    let curOp = '', curLv = 1, curAns = 0;
    let probIdx = 0, score = 0, cExpr = '';

    // APK/ì˜¤í”„ë¼ì¸ìš© ì†Œë¦¬ ì„¤ì • (íŒŒì¼ì´ í´ë” ë‚´ì— ìˆì–´ì•¼ í•¨)
    // ì—†ì„ ê²½ìš° ì—ëŸ¬ë¡œ ì•±ì´ ë©ˆì¶”ì§€ ì•Šë„ë¡ play() ì‹œì— catch ì²˜ë¦¬ ì¶”ê°€
    const soundCorrect = new Audio('correct.mp3');
    const soundWrong = new Audio('wrong.mp3');

    function switchView(viewId) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.getElementById('view-' + viewId).classList.add('active');
        if(viewId === 'home') {
            document.getElementById('op-list').style.display = 'block';
            document.getElementById('level-list').style.display = 'none';
        }
    }

    function switchTab(type) {
        if(type === 'home') {
            switchView('home');
            document.getElementById('tab-home').classList.add('active');
            document.getElementById('tab-calc').classList.remove('active');
        } else {
            switchView('calc');
            document.getElementById('tab-home').classList.remove('active');
            document.getElementById('tab-calc').classList.add('active');
        }
    }

    function showLevels(op) {
        curOp = op;
        document.getElementById('op-list').style.display = 'none';
        document.getElementById('level-list').style.display = 'block';
        const d = {
            '+':['1ìë¦¬ + 1ìë¦¬','2ìë¦¬ + 1ìë¦¬','2ìë¦¬ + 2ìë¦¬'],
            '-':['1ìë¦¬ - 1ìë¦¬','2ìë¦¬ - 1ìë¦¬','2ìë¦¬ - 2ìë¦¬'],
            '*':['2~5ë‹¨ ê¸°ì´ˆ','6~9ë‹¨ ë³´í†µ','ëœë¤ êµ¬êµ¬ë‹¨'],
            '/':['ê¸°ì´ˆ ë‚˜ëˆ„ê¸°','ë³´í†µ ë‚˜ëˆ„ê¸°','ì‹¬í™” ë‚˜ëˆ„ê¸°']
        };
        for(let i=1; i<=3; i++) document.getElementById('desc'+i).innerText = d[op][i-1];
    }

    function backToOp() {
        document.getElementById('op-list').style.display = 'block';
        document.getElementById('level-list').style.display = 'none';
    }

    function startGame(lv) {
        curLv = lv; probIdx = 0; score = 0;
        switchView('game');
        nextProb();
    }

    function nextProb() {
        probIdx++;
        if(probIdx > 10) return endMove();
        document.getElementById('cur-count').innerText = probIdx;
        document.getElementById('progress-fill').style.width = (probIdx * 10) + '%';
        document.getElementById('wrong-msg').style.visibility = 'hidden';
        
        let n1, n2;
        while(true) {
            if(curOp==='+'){
                if(curLv==1){n1=r(1,9); n2=r(1,9);} 
                else if(curLv==2){n1=r(10,99); n2=r(1,9);} 
                else {n1=r(10,99); n2=r(10,99);}
                curAns = n1 + n2;
            } else if(curOp==='-'){
                if(curLv==1){n1=r(2,9); n2=r(1,n1-1);} 
                else if(curLv==2){n1=r(11,99); n2=r(1,9);} 
                else {n1=r(21,99); n2=r(10,n1-1);}
                curAns = n1 - n2;
            } else if(curOp==='*'){
                if(curLv==1){n1=r(2,5); n2=r(1,9);} 
                else if(curLv==2){n1=r(6,9); n2=r(1,9);} 
                else {n1=r(2,9); n2=r(2,9);}
                curAns = n1 * n2;
            } else {
                n2 = r(2,9); curAns = r(1,9); n1 = n2 * curAns;
            }
            if(curAns !== 0) break;
        }

        const s = {'+':'+','-':'-','*':'Ã—','/':'Ã·'}[curOp];
        document.getElementById('q-display').innerText = `${n1} ${s} ${n2}`;
        document.getElementById('ans-input').value = '';
        document.getElementById('ans-input').focus();
    }

    function r(a, b) { return Math.floor(Math.random()*(b-a+1))+a; }

    function handleInput() {
        const v = document.getElementById('ans-input').value;
        if(v.length >= curAns.toString().length) {
            if(parseInt(v) === curAns) {
                score++;
                soundCorrect.play().catch(() => {}); // ì†Œë¦¬ íŒŒì¼ ì—†ì–´ë„ ë¬´ì‹œ
                popEffect();
                setTimeout(nextProb, 600);
            } else {
                soundWrong.play().catch(() => {});
                document.getElementById('wrong-msg').style.visibility = 'visible';
            }
        }
    }

    function popEffect() {
        const p = document.getElementById('feedback-pop');
        const emojis = ['ğŸ«§','ğŸŒŠ','ğŸ¬','ğŸš','ğŸ³','âœ¨'];
        p.innerText = emojis[Math.floor(Math.random()*emojis.length)];
        p.style.display = 'block';
        setTimeout(() => { p.style.display = 'none'; }, 800);
    }

    function endMove() {
        switchView('result');
        document.getElementById('score-text').innerText = score;
        
        const icon = document.getElementById('reward-icon');
        const msg = document.getElementById('praise-msg');
        const title = document.getElementById('result-title');

        if(score === 10) {
            title.innerText = "í™©ê¸ˆ í›ˆì¥ íšë“!";
            icon.innerText = "ğŸ…";
            msg.innerText = "ëŒ€ë‹¨í•´ ì†Œí˜„ì•„! ë¨¸ë¦¿ì†ì´ ë°”ë‹¤ì²˜ëŸ¼ ë„“ê³  ê¹Šì–´ì¡Œì–´! ğŸ”±";
        } else if(score >= 7) {
            title.innerText = "ë¬´ì§€ê°œ ë³´ì„ íšë“!";
            icon.innerText = "ğŸ’";
            msg.innerText = "ìš°ì™€! ì§€í˜œì˜ ë¹›ì´ ë°˜ì§ë°˜ì§! ì •ë§ ë˜‘ë˜‘í•´ì¡Œì–´! âœ¨";
        } else {
            title.innerText = "ì§€í˜œì˜ ì—´ì‡  íšë“!";
            icon.innerText = "ğŸ”‘";
            msg.innerText = "ì¡°ê¸ˆë§Œ ë” í•˜ë©´ ë°”ë‹¤ ì™•ê´€ë„ ì“¸ ìˆ˜ ìˆê² ì–´! í™”ì´íŒ…! ğŸŒŠ";
        }
    }

    function cIn(v) { cExpr += v; uC(); }
    function cClear() { cExpr = ''; uC(); }
    function cSolve() { try { cExpr = eval(cExpr.replace(/Ã—/g,'*').replace(/Ã·/g,'/')).toString(); } catch { cExpr = 'Error'; } uC(); }
    function uC() { document.getElementById('calc-display').innerText = cExpr || '0'; }
</script>
</body>

</html>
