<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>í•˜ëŠ˜ë°”ë‹¤ ìˆ«ìë†€ì´</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&family=Nanum+Square+Round:wght@400;700&display=swap');

        :root {
            --cloud-pink: #E0F7FA;
            --main-pink: #81D4FA;
            --deep-pink: #0288D1;
            --sky-blue: #E1F5FE;
            --white: #FFFFFF;
        }

        body {
            font-family: 'NanumSquareRound', sans-serif;
            background: linear-gradient(135deg, #B2EBF2 0%, #E1F5FE 100%);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center; /* ì‹œë‚˜ëª¨ë¡¤í°ì˜ ì‘ì€ í™”ë©´ ëŒ€ì‘ */
            height: 100vh;
            overflow: hidden;
        }

        #phone-container {
            background: var(--white);
            width: 100%;
            max-width: 400px;
            /* ì¤‘ìš”: ì‹œë‚˜ëª¨ë¡¤í°ì˜ ì§§ì€ í™”ë©´ì„ ìœ„í•´ ì „ì²´ ë†’ì´ì˜ 92%ë§Œ ì‚¬ìš© */
            height: 92%; 
            display: flex;
            flex-direction: column;
            position: relative;
            box-sizing: border-box;
            /* í° í™”ë©´ í•˜ë‹¨ ëì— ë¶™ì§€ ì•Šê²Œ ì‚´ì§ ë„ì›€ */
            margin-bottom: 20px; 
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .view {
            display: none;
            flex: 1;
            padding: 10px 15px;
            text-align: center;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle at top left, #F0FBFF 0%, #FFFFFF 100%);
            overflow-y: auto;
        }

        .view.active { display: flex; }

        /* í•˜ë‹¨ íƒ­ ë°”: ë†’ì´ë¥¼ ì‚´ì§ ì¤„ì´ê³  ìœ„ë¡œ ì˜¬ë¦¼ */
        .tab-bar { 
            height: 65px; 
            min-height: 65px;
            background: #fff; 
            display: flex; 
            border-top: 2px solid #E1F5FE;
            border-radius: 0 0 20px 20px;
        }

        .tab-item { 
            flex: 1; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            color: #B3E5FC; 
            font-size: 0.75rem;
        }
        .tab-item.active { color: var(--deep-pink); font-weight: bold; }
        .tab-icon { font-size: 1.3rem; margin-bottom: 2px; }

        /* ì‹œë‚˜ëª¨ë¡¤í°ì—ì„œ ì§¤ë¦¬ì§€ ì•Šê²Œ ê¸€ì í¬ê¸° ìµœì í™” */
        h2 { font-size: 1.8rem; color: var(--deep-pink); margin: 5px 0; font-family: 'Nanum Pen Script', cursive; }
        .card { width: 90%; padding: 8px; margin-bottom: 6px; border-radius: 15px; border: 2px solid var(--cloud-pink); background: white; }
        .card h3 { font-size: 1rem; margin: 0; }
        .card p { font-size: 0.75rem; margin: 0; }
        .q-text { font-size: 3rem; font-weight: bold; margin: 8px 0; }
        .ans-input { width: 50%; font-size: 2rem; border: 3px solid var(--main-pink); border-radius: 12px; text-align: center; }

        /* ê³„ì‚°ê¸° ë²„íŠ¼ ê°„ê²© ì¢í˜ */
        #calc-display { width: 100%; height: 40px; background: #F0F9FF; border-radius: 10px; font-size: 1.2rem; display: flex; align-items: center; justify-content: flex-end; padding: 0 10px; margin-bottom: 8px; border: 1px solid var(--cloud-pink); box-sizing: border-box;}
        .calc-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 4px; width: 100%; flex: 1; }
        .calc-btn { border-radius: 10px; border: none; background: white; border-bottom: 2px solid #E1F5FE; font-size: 1rem; }
    </style>
</head>
<body>

<div id="phone-container">
    <div id="view-home" class="view active">
        <h2>ğŸ³ ì†Œí˜„ì´ ìˆ«ìë†€ì´ ğŸ¬</h2>
        <div id="op-list" style="width:100%;">
            <button class="card" onclick="showLevels('+')"><h3>ğŸŒŠ ë§ì…ˆ (+)</h3></button>
            <button class="card" style="border-color:#C8E6C9" onclick="showLevels('-')"><h3>ğŸš ëº„ì…ˆ (-)</h3></button>
            <button class="card" style="border-color:#FFE0B2" onclick="showLevels('*')"><h3>ğŸ¦€ ê³±ì…ˆ (Ã—)</h3></button>
            <button class="card" style="border-color:#D1C4E9" onclick="showLevels('/')"><h3>ğŸ³ ë‚˜ëˆ—ì…ˆ (Ã·)</h3></button>
        </div>
        <div id="level-list" style="display:none; width:100%">
            <button class="card" onclick="startGame(1)"><h3>ğŸ«§ ì–•ì€ ë°”ë‹¤</h3><p id="desc1"></p></button>
            <button class="card" onclick="startGame(2)"><h3>ğŸŒŠ íŒŒë„ ë°”ë‹¤</h3><p id="desc2"></p></button>
            <button class="card" onclick="startGame(3)"><h3>ğŸ”± ê¹Šì€ ë°”ë‹¤</h3><p id="desc3"></p></button>
            <button onclick="backToOp()" style="font-size:0.8rem; color:#4FC3F7; border:none; background:none; text-decoration:underline;">ë’¤ë¡œê°€ê¸°</button>
        </div>
    </div>

    <div id="view-game" class="view">
        <div style="width:100%; height:6px; background:#E0F2F1; border-radius:10px; margin-bottom:10px;"><div id="progress-fill" style="width:0%; height:100%; background:var(--main-pink); border-radius:10px;"></div></div>
        <div class="q-text" id="q-display">0 + 0</div>
        <input type="number" id="ans-input" class="ans-input" inputmode="numeric" onkeyup="handleInput()">
    </div>

    <div id="view-result" class="view">
        <h2>ë³´ì„ íšë“!</h2>
        <div id="reward-icon" style="font-size: 3rem; margin: 10px;">ğŸ’</div>
        <p id="praise-msg" style="font-weight:bold; font-size:0.9rem; color:#01579B;"></p>
        <button class="card" onclick="switchView('home')" style="background:var(--main-pink); color:white; border:none;"><h3>ë‹¤ì‹œ í•˜ê¸°</h3></button>
    </div>

    <div id="view-calc" class="view">
        <h2 style="font-size: 1.5rem;">â˜ï¸ êµ¬ë¦„ ê³„ì‚°ê¸°</h2>
        <div id="calc-display">0</div>
        <div class="calc-grid">
            <button class="calc-btn" onclick="cIn('7')">7</button><button class="calc-btn" onclick="cIn('8')">8</button><button class="calc-btn" onclick="cIn('9')">9</button><button class="calc-btn op" onclick="cIn('/')">Ã·</button>
            <button class="calc-btn" onclick="cIn('4')">4</button><button class="calc-btn" onclick="cIn('5')">5</button><button class="calc-btn" onclick="cIn('6')">6</button><button class="calc-btn op" onclick="cIn('*')">Ã—</button>
            <button class="calc-btn" onclick="cIn('1')">1</button><button class="calc-btn" onclick="cIn('2')">2</button><button class="calc-btn" onclick="cIn('3')">3</button><button class="calc-btn op" onclick="cIn('-')">-</button>
            <button class="calc-btn" onclick="cClear()">C</button><button class="calc-btn" onclick="cIn('0')">0</button><button class="calc-btn op" onclick="cSolve()">=</button><button class="calc-btn op" onclick="cIn('+')">+</button>
        </div>
    </div>

    <div class="tab-bar">
        <div class="tab-item active" id="tab-home" onclick="switchTab('home')">
            <span class="tab-icon">ğŸï¸</span><span>ê³µë¶€ë°©</span>
        </div>
        <div class="tab-item" id="tab-calc" onclick="switchTab('calc')">
            <span class="tab-icon">â˜ï¸</span><span>ê³„ì‚°ê¸°</span>
        </div>
    </div>
</div>

<script>
    let curOp = '', curLv = 1, curAns = 0, probIdx = 0, score = 0, cExpr = '';
    const soundCorrect = new Audio('correct.mp3');
    const soundWrong = new Audio('wrong.mp3');

    function switchView(viewId) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.getElementById('view-' + viewId).classList.add('active');
    }
    function switchTab(type) {
        if(type === 'home') { switchView('home'); document.getElementById('tab-home').classList.add('active'); document.getElementById('tab-calc').classList.remove('active'); }
        else { switchView('calc'); document.getElementById('tab-home').classList.remove('active'); document.getElementById('tab-calc').classList.add('active'); }
    }
    function showLevels(op) {
        curOp = op; document.getElementById('op-list').style.display = 'none'; document.getElementById('level-list').style.display = 'block';
        const d = {'+':['1ìë¦¬','2ìë¦¬+1','2ìë¦¬+2'],'-':['1ìë¦¬','2ìë¦¬-1','2ìë¦¬-2'],'*':['2~5ë‹¨','6~9ë‹¨','ëœë¤'],'/':['ê¸°ì´ˆ','ë³´í†µ','ì‹¬í™”']};
        for(let i=1; i<=3; i++) document.getElementById('desc'+i).innerText = d[op][i-1];
    }
    function backToOp() { document.getElementById('op-list').style.display = 'block'; document.getElementById('level-list').style.display = 'none'; }
    function startGame(lv) { curLv = lv; probIdx = 0; score = 0; switchView('game'); nextProb(); }
    function nextProb() {
        probIdx++; if(probIdx > 10) return endMove();
        document.getElementById('progress-fill').style.width = (probIdx * 10) + '%';
        let n1, n2;
        while(true) {
            if(curOp==='+'){ if(curLv==1){n1=r(1,9); n2=r(1,9);} else if(curLv==2){n1=r(10,99); n2=r(1,9);} else {n1=r(10,99); n2=r(10,99);} curAns = n1 + n2; }
            else if(curOp==='-'){ if(curLv==1){n1=r(2,9); n2=r(1,n1-1);} else if(curLv==2){n1=r(11,99); n2=r(1,9);} else {n1=r(21,99); n2=r(10,n1-1);} curAns = n1 - n2; }
            else if(curOp==='*'){ if(curLv==1){n1=r(2,5); n2=r(1,9);} else if(curLv==2){n1=r(6,9); n2=r(1,9);} else {n1=r(2,9); n2=r(2,9);} curAns = n1 * n2; }
            else { n2 = r(2,9); curAns = r(1,9); n1 = n2 * curAns; }
            if(curAns !== 0) break;
        }
        const s = {'+':'+','-':'-','*':'Ã—','/':'Ã·'}[curOp];
        document.getElementById('q-display').innerText = `${n1} ${s} ${n2}`;
        document.getElementById('ans-input').value = ''; document.getElementById('ans-input').focus();
    }
    function r(a, b) { return Math.floor(Math.random()*(b-a+1))+a; }
    function handleInput() {
        const v = document.getElementById('ans-input').value;
        if(v.length >= curAns.toString().length) {
            if(parseInt(v) === curAns) { score++; soundCorrect.play().catch(()=>{}); setTimeout(nextProb, 600); }
            else { soundWrong.play().catch(()=>{}); }
        }
    }
    function endMove() {
        switchView('result');
        const msg = document.getElementById('praise-msg');
        if(score === 10) msg.innerText = "ì†Œí˜„ì•„ ìµœê³ ! ğŸ”±";
        else if(score >= 7) msg.innerText = "ì •ë§ ì˜í–ˆì–´! âœ¨";
        else msg.innerText = "ë‹¤ì‹œ í•´ë³´ì! ğŸŒŠ";
    }
    function cIn(v) { cExpr += v; uC(); }
    function cClear() { cExpr = ''; uC(); }
    function cSolve() { try { cExpr = eval(cExpr.replace(/Ã—/g,'*').replace(/Ã·/g,'/')).toString(); } catch { cExpr = 'Error'; } uC(); }
    function uC() { document.getElementById('calc-display').innerText = cExpr || '0'; }
</script>
</body>
</html>
